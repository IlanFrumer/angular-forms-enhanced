!function(a){"use strict";var b=a.module("ngFormsEnhanced",[]),c="ng-pristine",d="ng-dirty",e=a.noop,f={$addControl:e,$removeControl:e,$setValidity:e,$setDirty:e,$setPristine:e,$updatePristine:e},g=function(e,g){b.directive(e,function(){return{restrict:g,require:"form",compile:function(){return{pre:function(b,e,g,h){var i=e.parent().controller("form")||f,j=h.$addControl,k=h.$removeControl;h.$controls=[],h.$addControl=function(a){j(a),h.$controls.push(a)},h.$removeControl=function(a){k(a);var b=h.$controls.indexOf(a);b>=0&&h.$controls.splice(b,1)},h.$revert=function(){for(var a=0;a<h.$controls.length;a+=1)h.$controls[a].$dirty&&h.$controls[a].$revert(!0);h.$setPristine()},h.$setPristine=function(b){e.removeClass(d).addClass(c),h.$dirty=!1,h.$pristine=!0,b||a.forEach(h.$controls,function(a){a.$setPristine()}),i.$updatePristine()},h.$updatePristine=function(){for(var a=0;a<h.$controls.length;a+=1)if(h.$controls[a].$dirty)return;h.$setPristine(!0)}}}}}})};g("form","E"),g("ngForm","EAC"),b.directive("ngModel",["$parse","$exceptionHandler",function(b,e){return{require:["ngModel","^?form"],compile:function(g,h){var i=b(h.ngModel),j=i.assign;return{pre:function(b,g,h,i){var k=i[0],l=i[1]||f,m=function(){var b=null,c=!0;return{get:function(){return b},set:function(a){return k.$pristine&&(b=k.$modelValue,c=k.$isEmpty(b)),a},equals:function(d){return k.$invalid?!1:c?k.$isEmpty(d):a.equals(b,d)}}}();k.$formatters.unshift(m.set);var n=function(c){j(b,c),a.forEach(k.$viewChangeListeners,function(a){try{a()}catch(b){e(b)}})};k.$revert=function(a){m.equals(k.$modelValue)||(a||(k.$dirty=!1,k.$pristine=!0,g.removeClass(d).addClass(c),l.$updatePristine()),n(m.get()))},k.$setPristine=function(){k.$dirty=!1,k.$pristine=!0,g.removeClass(d).addClass(c),m.set(),l.$updatePristine()},k.$setViewValue=function(b){k.$viewValue=b,a.forEach(k.$parsers,function(a){b=a(b)}),k.$modelValue!==b&&(k.$modelValue=b,k.$dirty?m.equals(b)&&k.$setPristine():m.equals(b)||(k.$dirty=!0,k.$pristine=!1,g.removeClass(c).addClass(d),l.$setDirty()),n(b))}}}}}}])}(angular);